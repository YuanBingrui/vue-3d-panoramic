webpackJsonp([1],{"+BTi":function(e,t){},"+M8b":function(e,t){},Dzb6:function(e,t){},GXEp:function(e,t){},LL4n:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("cwe7"),n("+BTi");var o=n("2X9z"),a=n.n(o),i=(n("Yq4J"),n("qubY")),s=n.n(i),c=(n("LL4n"),n("BrEC")),u=n.n(c),r=(n("U/ZW"),n("+nRk")),m=n.n(r),l=(n("Dzb6"),n("o6kb")),d=n.n(l),h=(n("jAzQ"),n("wOhx")),f=n.n(h),p=(n("X+ky"),n("HJMx")),v=n.n(p),g=(n("GXEp"),n("mtrD")),w=n.n(g),b=n("7+uW"),$=n("Ml+6"),M={};M._main_=function(e,t){var n,o,a,i,s,c,u,r,m,l,d=new e.Vector3,h=-90,f=0,p=0,v=0,g=!1;!function(){m=t.$el.clientWidth,l=t.$el.clientHeight-33,n=new e.PerspectiveCamera(260,m/l,1,1e3),o=new e.Scene,(i=new e.SphereBufferGeometry(500,60,40)).scale(-1,1,1);var u=(new e.CubeTextureLoader).load(t.cubeImg);s=new e.MeshBasicMaterial({envMap:u}),c=new e.Mesh(i,s),o.add(c),function(){for(;t.$el.hasChildNodes();)t.$el.removeChild(t.$el.firstChild)}(),(a=new e.WebGLRenderer).setPixelRatio(window.devicePixelRatio),a.setSize(m,l),t.$el.appendChild(a.domElement),t.$on("mousedown",$),t.$on("wheel",_),t.$on("touchstart",C),t.$on("touchmove",x),t.$on("handelresize",b),window.addEventListener("resize",w,!1)}(),function t(){requestAnimationFrame(t);g&&(h+=.1);f=Math.max(-85,Math.min(85,f));p=e.Math.degToRad(90-f);v=e.Math.degToRad(h);d.x=500*Math.sin(p)*Math.cos(v);d.y=500*Math.cos(p);d.z=500*Math.sin(p)*Math.sin(v);n.lookAt(d);a.render(o,n)}();function w(){t.$emit("handelresize",t)}function b(e){n.aspect=e.$el.clientWidth/(e.$el.clientHeight-33),n.updateProjectionMatrix(),a.setSize(e.$el.clientWidth,e.$el.clientHeight-33)}function $(e){g=!g,t.$on("mousemove",M),t.$on("mouseup",D)}function M(e){var t=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0;h-=.1*t,f+=.1*n}function D(e){t.$off("mousemove",M),t.$off("mouseup",D)}function _(e){n.fov>=260&&n.fov<=350&&(n.fov+=.05*e.deltaY,255===n.fov&&(n.fov=260),355===n.fov&&(n.fov=350),n.updateProjectionMatrix())}function C(e){var t=e.touches[0];u=t.screenX,r=t.screenY}function x(e){var t=e.touches[0];h-=.1*(t.screenX-u),f+=.1*(t.screenY-r),u=t.screenX,r=t.screenY}};var D=M,_={name:"ThreeDshow",props:{modeName:{type:String,default:"全景图"},cubeImg:{validator:function(e){return e instanceof Array}}},data:function(){return{}},watch:{cubeImg:function(){D._main_($,this)},modeName:function(){this.$el.dataset.content=this.modeName}},mounted:function(){this.$el.dataset.content=this.modeName,D._main_($,this)},methods:{autoMobile:function(e){this.$emit("mousedown",e)},mouseMove:function(e){this.$emit("mousemove",e)},mouseUp:function(e){this.$emit("mouseup",e)},wheelZoom:function(e){this.$emit("wheel",e)},touchStart:function(e){this.$emit("touchstart",e)},touchMove:function(e){this.$emit("touchmove",e)}}},C={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{attrs:{id:"threeDshowBox","data-content":""},on:{mousedown:function(t){t.preventDefault(),e.autoMobile(t)},mousewheel:function(t){t.preventDefault(),e.wheelZoom(t)},mousemove:function(t){t.preventDefault(),e.mouseMove(t)},mouseup:function(t){t.preventDefault(),e.mouseUp(t)},touchstart:function(t){t.preventDefault(),e.touchStart(t)},touchmove:function(t){t.preventDefault(),e.touchMove(t)}}})},staticRenderFns:[]};var x={name:"Home",components:{ThreeDshow:n("VU/8")(_,C,!1,function(e){n("lJ+j")},"data-v-907d8ece",null).exports},data:function(){return{dialogImageUrl:"",dialogVisible:!1,modeName:"3D全景",cubeImg:["/3DPanoramic/static/cube/posx.jpg","/3DPanoramic/static/cube/negx.jpg","/3DPanoramic/static/cube/posy.jpg","/3DPanoramic/static/cube/negy.jpg","/3DPanoramic/static/cube/posz.jpg","/3DPanoramic/static/cube/negz.jpg"],modeArr:[{id:"3DPanorama",name:"3D全景"},{id:"3DPanorama1",name:"3D全景1"},{id:"3DPanorama2",name:"3D全景2"},{id:"3DPanorama3",name:"3D全景3"}],tempCubeImg:[]}},methods:{handleRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleChange:function(e,t){"image/jpeg"===t[t.length-1].raw.type||"image/png"===t[t.length-1].raw.type?this.tempCubeImg=t:(t.pop(),this.$message.warning("只能上传jpg或png格式的图片"))},handleExceed:function(e,t){this.$message.warning("只能上传"+t.length+"个文件")},generatePanorama:function(){var e=this;6===this.tempCubeImg.length?this.tempCubeImg.forEach(function(t,n){e.$set(e.cubeImg,n,e.changeImgSize(e.tempCubeImg[n].url))}):this.$message.warning("必须上传6张图片")},switchMode:function(e){this.initMode(e)},initMode:function(e){var t=this;this.modeArr.map(function(n){n.id===e&&(t.modeName=n.name)})},changeImgSize:function(e){var t=this.$parent.$el.ownerDocument.createElement("canvas"),n=t.getContext("2d");t.width=1024,t.height=1024;var o=new Image;return o.src=e,n.drawImage(o,0,0,t.width,t.height),t.toDataURL("image/png")}}},P={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",{staticClass:"headerBtnBox"},[n("el-button",{attrs:{size:"medium"},on:{click:e.generatePanorama}},[e._v("\n      生成全景图\n    ")]),e._v(" "),n("div",{staticStyle:{color:"#c1c1c1","margin-left":"5px","margin-right":"60%"}},[e._v("(ps: 上传图片的顺序为左、右、上、下、前、后)")]),e._v(" "),n("el-dropdown",{on:{command:e.switchMode}},[n("el-button",{attrs:{size:"medium"}},[e._v("\n        "+e._s(e.modeName)+"\n        "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e._l(e.modeArr,function(t){return[n("el-dropdown-item",{attrs:{command:t.id}},[e._v("\n            "+e._s(t.name)+"\n          ")])]})],2)],1)],1),e._v(" "),n("div",{staticClass:"contentBox"},[n("div",{staticClass:"leftBox"},[n("div",{staticClass:"titleFontSize"},[e._v("平面图")]),e._v(" "),n("div",{staticClass:"plainImgBox"},[n("el-upload",{staticClass:"upload-card",attrs:{action:"","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-change":e.handleChange,"auto-upload":!1,limit:6,"on-exceed":e.handleExceed}},[n("i",{staticClass:"el-icon-plus"})]),e._v(" "),n("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)]),e._v(" "),n("div",{staticClass:"rightBox"},[n("ThreeDshow",{attrs:{"cube-img":e.cubeImg,"mode-name":e.modeName}})],1)])])},staticRenderFns:[]};var z={name:"app",components:{Home:n("VU/8")(x,P,!1,function(e){n("nmj8")},null,null).exports}},I={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("Home")],1)},staticRenderFns:[]};var j=n("VU/8")(z,I,!1,function(e){n("+M8b")},null,null).exports;b.default.config.productionTip=!1,b.default.use(w.a),b.default.use(v.a),b.default.use(f.a),b.default.use(d.a),b.default.use(m.a),b.default.use(u.a),b.default.use(s.a),b.default.use(a.a),b.default.prototype.$message=a.a,new b.default({el:"#app",template:"<App/>",components:{App:j}})},"U/ZW":function(e,t){},"X+ky":function(e,t){},Yq4J:function(e,t){},cwe7:function(e,t){},jAzQ:function(e,t){},"lJ+j":function(e,t){},nmj8:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.6065edb08332d65fa336.js.map